## Практические задания для курса «Программные средства высокопроизводительных компьютерных систем»

Репозиторий содержит задания для OpenMP и OpenMPI соответственно в директориях `/openMP` и `/MPI`, а также отчет по заданиям в файле `README.md`. Также приведены выводы программ в папке `/reports`.

### OpenMP
<details>
  <summary>Задание 0: Сравнение производительности (последовательно, atomic, reduction)</summary><br>
  Замеряется время последовательного и параллельного исполнения программы для подсчета суммы элементов массива. <br><br>

| Type | N | Time (ms) |
|------|---|-----------|
| Seq | 1000000 | 4.21213 |	
| Atomic | 1000000 | 29.5668 |	
| Reduct | 1000000 | 0.533715 |
</details>

<details>
    <summary>Задание 1: Вычисление числа PI:</summary><br>
    Число PI вычисляется как:
    $$\pi = \left(\frac{4}{1 + x_0^2} + \frac{4}{1 + x_1^2} + \cdots + \frac{4}{1 + x_{N-1}^2}\right)\times \frac{1}{N},$$
    где $x_i = (i + 0.5)\times \frac{1}{N}$, $i = \overline{1,N-1}$, параметр $N$ задается в программе.<br>
    Для распараллеливания задачи был использован #pragma omp parallel for reduction(+:pi).
</details>

<details>
    <summary>Задание 2: Исследование масштабируемости на примере программы из Задания 1</summary><br>
    Подставляя разные значения параметра $N$ и числа потоков, были получены следующие данные: <br><br>
  
 | N | Threads | Time (ms) |
 |---|---------|-----------|
 | 1e2 | 1 | 0.01592 |
 | 1e6 | 1 | 39.3229 |
 | 1e2 | 2 | 0.01393 |
 | 1e6 | 2 | 16.7184 |
 | 1e2 | 4 | 0.1813 |
 | 1e6 | 4 | 7.8719 |
 | 1e2 | 8 | 0.2063 |
 | 1e6 | 8 | 5.2623 | 
 | 1e2 | 10 | 0.0925 |
 | 1e6 | 10 | 8.3677 |
 | 1e2 | 12 | 0.1154 |
 | 1e6 | 12 | 6.6702 |
</details>

<details>
    <summary>Задание 3: Умножение матриц</summary><br>
    Матрица задается случайно элементами от -100 до 100. Произведение матриц считается с помощью #pragma omp parallel for
во вложенном цикле. Программа выводит затраченное на вычисление время. Алгоритм был запущен на разном количестве потоков, были получены следующие результаты: <br><br>
    
| N | Threads | Time (ms) |
|---|---------| ----------|
| 1000 | 1 | 14708.2 |
| 1000 | 2 | 7657.59 |
| 1000 | 4 | 3862.81 |
| 1000 | 8 | 2132.61 |
</details>

<details>
    <summary>Задание 4: Сортировка слиянием</summary><br>
    Массив задается случайными значениями от -100 до 100. Параллельная версия содержит два задания (#pragma omp task) для сортировки частей массива. Программа выводит время последовательного и параллельного выполнения: <br><br>
    
  | | Time (ms) |
  |-|-----------|
  | Sequatial | 4450.56 |
  | Parallel | 836.178 |
</details>

### OpenMPI
  <details>
      <summary>Задание 1: Вычисление числа PI</summary><br>
      Число PI вычисляется по формуле из Задания 1 для OpenMP, по умолчанию параметр N = 1e8. Каждая нода вычисляет локальную сумму числа PI, затем все эти суммы собираются в одну с помощью MPI_Reduce.<br> Результаты запуска программы: <br><br>

| Nodes | Time (ms) |
|-------|-----------|
| 1 | 2584.82 |
| 2 | 1064.82 |
| 4 | 758.17 |
| 8 | 381.59 |

  </details>

  <details>
      <summary>Задание 2: Умножение матриц</summary><br>
      Ноды делят между собой строки матрицы (если размерность матрицы не делится на количество нод, то последняя забирает оставшиеся строки), умножают каждую строку на столбцы из второй матрицы, и возвращают итоговую строку матрицы. Результаты запуска программы: <br><br>
      
| Nodes | Time (ms) |
|-------|-----------|
| 1 | 11863.64 |
| 2 | 7599.78 |
| 4 | 3627.83 |
| 8 | 2366.80 |
  </details>

  <details>
      <summary>Задание 3: Сортировка слиянием</summary><br>
      Массив разбивается на n частей (где n - количество нод), каждая часть сортируется в своей ноде. После сортировки все части собираются в массив с помощью MPI_Gather, который затем окончательно сортируется на корневом узле. <br><br>
      
| Nodes | Time (ms) |
|-------|-----------|
| 1 | 5749.86 |
| 2 | 4690.19 |
| 4 | 3633.94 |
| 8 | 3121.51 |
  </details>

### Linpack
<details>
    <summary>Отчет</summary> <br>
    Была исследована производительность при изменении параметров (P, Q, NB) на примере алгоритма WR00L2L4. <br>
    С помощью серии экспериментов были получены следующие данные:<br><br>

| N | NB | P | Q | Time | Gflops |
|---|----|---|---|------|--------|
| 3000 | 30 | 1 | 8 | 0.56 | 32.02 |
| 3000 | 30 | 2 | 4 | 0.57 | 31.76 |
| 3000 | 30 | 4 | 2 | 0.57 | 31.55 | 
| 3000 | 30 | 8 | 1 | 0.64 | 28.09 |
| 3000 | 15 | 1 | 8 | 0.60 | 30.04 |
| 3000 | 70 | 1 | 8 | 0.60 | 30.02 |

<br>
Как видно из таблицы, наиболее оптимальными являются параметры из первой строчки; параметры из второй или третьей строчки являются также оптимальными, в отличие от параметров из четвертой строчки.
    
</details>
